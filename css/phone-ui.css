<!-- FontAwesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
  .phone-ui {
    width: 340px;
    background: #111;
    border: 4px solid #333;
    border-radius: 30px;
    margin: 30px auto;
    padding: 15px;
    color: #0f0;
    font-family: 'Segoe UI', sans-serif;
    box-shadow: 0 0 20px #000;
  }

  .phone-header {
    text-align: center;
    font-weight: bold;
    margin-bottom: 10px;
    font-size: 1.3em;
  }

  .stats {
    background: #000;
    padding: 10px;
    border-radius: 8px;
    font-size: 0.9em;
    margin-bottom: 10px;
  }

  .app-buttons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    text-align: center;
  }

  .app-buttons button {
    background: #222;
    color: #0f0;
    border: 1px solid #444;
    padding: 12px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 1em;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .app-buttons button i {
    font-size: 20px;
    margin-bottom: 5px;
  }

  .app-buttons button:hover {
    background-color: #0f0;
    color: #111;
  }

  .phone-screen {
    margin-top: 15px;
    background: #000;
    padding: 10px;
    min-height: 200px;
    border: 1px solid #0f0;
    border-radius: 10px;
    overflow-y: auto;
    font-size: 0.9em;
  }

  .save-load {
    margin-top: 10px;
    display: flex;
    justify-content: space-between;
  }

  .save-load button {
    flex: 1;
    margin: 3px;
    padding: 8px;
    background: #222;
    border: 1px solid #444;
    color: #0f0;
    font-size: 0.9em;
    border-radius: 6px;
    cursor: pointer;
  }

  .save-load button:hover {
    background: #0f0;
    color: #111;
  }
</style>

<div class="phone-ui">
  <div class="phone-header">45th Parallel OS</div>

  <div class="stats" id="statPanel">
    Wealth: $<span id="wealth">1000</span><br>
    XP: <span id="xp">0</span> | Level: <span id="level">1</span><br>
    Heat: <span id="heat">0</span> | Mood: <span id="mood">Neutral</span>
  </div>

  <div class="app-buttons">
    <button data-app="messages"><i class="fas fa-envelope"></i>Messages</button>
    <button data-app="map"><i class="fas fa-map"></i>Map</button>
    <button data-app="missions"><i class="fas fa-briefcase"></i>Missions</button>
    <button data-app="inventory"><i class="fas fa-boxes"></i>Inventory</button>
    <button data-app="log"><i class="fas fa-scroll"></i>Log</button>
  </div>

  <div class="save-load">
    <button onclick="saveGame()">Save</button>
    <button onclick="loadGame()">Load</button>
  </div>

  <div class="phone-screen" id="phoneScreen">
    <p>Welcome to 45th Parallel.</p>
  </div>
</div>

<script>
  const player = {
    wealth: 1000,
    xp: 0,
    level: 1,
    heat: 0,
    mood: "Neutral",
    log: []
  };

  function updateStats() {
    document.getElementById("wealth").textContent = player.wealth;
    document.getElementById("xp").textContent = player.xp;
    document.getElementById("level").textContent = player.level;
    document.getElementById("heat").textContent = player.heat;
    document.getElementById("mood").textContent = player.mood;
  }

  function addLog(entry) {
    const time = new Date().toLocaleTimeString();
    player.log.push(`[${time}] ${entry}`);
    if (player.log.length > 50) player.log.shift();
  }

  function renderApp(app) {
    const screen = document.getElementById('phoneScreen');
    if (!screen) return;
    let content = '';
    if (app === 'messages') {
      content = '<p><strong>Dealer:</strong> Got that new strain.<br><strong>Cop:</strong> Weâ€™re watching you.</p>';
    } else if (app === 'map') {
      content = '<p>Locations: Skid Row, Warehouse, Docks, Nightclub</p>';
    } else if (app === 'missions') {
      content = '<p>Mission: Deliver LSD to the club<br>Reward: $500 & +10 XP</p>';
    } else if (app === 'inventory') {
      content = '<p>2x Purple Haze<br>3x LSD Tabs<br>Cash: $' + player.wealth + '</p>';
    } else if (app === 'log') {
      content = player.log.slice().reverse().map(l => `<div>${l}</div>`).join('');
    } else {
      content = '<p>Welcome back.</p>';
    }
    screen.innerHTML = content;
  }

  function saveGame() {
    localStorage.setItem("parallelSave", JSON.stringify(player));
    addLog("Game saved.");
    renderApp('log');
  }

  function loadGame() {
    const save = localStorage.getItem("parallelSave");
    if (!save) return;
    const data = JSON.parse(save);
    Object.assign(player, data);
    addLog("Game loaded.");
    updateStats();
    renderApp('log');
  }

  // Bind app buttons
  document.addEventListener('DOMContentLoaded', () => {
    updateStats();
    document.querySelectorAll('.app-buttons button').forEach(btn => {
      btn.addEventListener('click', () => {
        renderApp(btn.dataset.app);
      });
    });
  });
</script>
